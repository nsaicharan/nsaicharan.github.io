<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>NivasMantra</title>
    <link rel="shortcut icon" href="favicon.png" type="image/png">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <h1>Nivas Mantra</h1>

        <h2>0</h2>

        <button class="reset">Reset</button>

        <div class="add">+</div>
    </div>

    <script>
        const countContainer = document.querySelector('h2');
        const addBtn = document.querySelector(".add");
        const resetBtn = document.querySelector(".reset");
        const localCount = localStorage.getItem('count') || 0;

        // Set initial value
        countContainer.innerText = localCount;

        addBtn.addEventListener('click', () => {
            const currentCount = Number(countContainer.innerText);
            const newCount = currentCount + 1;

            countContainer.innerText = newCount;
            localStorage.setItem('count', newCount);
        });

        resetBtn.addEventListener('click', () => {
            countContainer.innerText = 0;
            localStorage.setItem('count', 0);
        });

        // Register service worker
        if ("serviceWorker" in navigator) {
            window.addEventListener("load", () => {
                navigator.serviceWorker
                    .register("sw.js")
                    .then(reg => console.log("Service Worker Registered"))
                    .catch(err => console.error(err));
            });
        }
    </script>

</body>

</html>